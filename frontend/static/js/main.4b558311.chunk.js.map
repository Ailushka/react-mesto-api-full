{"version":3,"sources":["images/logo.svg","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/PopupWithForm.js","components/ImagePopup.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/Register.js","components/Login.js","images/success.svg","images/fail.svg","components/InfoTooltip.js","components/ProtectedRoute.js","utils/api.js","utils/auth.js","components/App.js","index.js"],"names":["Header","currentUserEmail","onLogOut","location","useLocation","className","src","logo","alt","pathname","onClick","path","to","exact","CurrentUserContext","React","createContext","Card","card","onCardClick","onCardLike","onCardDelete","currentUser","useContext","isOwn","owner","_id","cardDeleteButtonClassName","isLiked","likes","some","i","cardLikeButtonClassName","link","name","type","aria-label","length","Main","onEditAvatar","onEditProfile","onAddPlace","cards","avatar","about","map","Footer","Date","getFullYear","PopupWithForm","isOpen","onSubmit","title","children","buttonTitle","onClose","popupClassNames","ImagePopup","EditProfilePopup","onUpdateUser","useState","setName","description","setDescription","useEffect","e","preventDefault","value","onChange","target","minLength","maxLength","id","required","EditAvatarPopup","onUpdateAvatar","avatarRef","useRef","current","placeholder","ref","AddPlacePopup","placeName","setPlaceName","placeLink","setPlaceLink","Register","onRegister","email","setEmail","password","setPassword","Login","onLogin","InfoTooltip","status","success","fail","ProtectedRoute","Component","component","props","loggedIn","api","url","this","_url","_password","fetch","method","headers","authorization","then","_checkResponse","user","body","JSON","stringify","item","cardId","hasLike","res","ok","json","Promise","reject","auth","baseUrl","token","data","App","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isInfoTooltipOpen","setIsInfoTooltipOpen","selectedCard","setSelectedCard","setCurrentUser","setCards","setLoggedIn","setCurrentUserEmail","infoTooltip","setInfoTooltip","history","useHistory","closeAllPopups","getUserInfo","catch","err","console","log","getInitialCards","localStorage","getItem","getContent","push","removeItem","tokenCheck","Provider","toggleLikeCardStatus","newCard","state","c","deleteCard","filter","signup","signin","setItem","patchUserInfo","postCard","patchUserAvatar","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.4b558311.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.03b78ada.svg\";","import logo from '../images/logo.svg';\r\nimport { Link, Route, useLocation } from 'react-router-dom';\r\n\r\nfunction Header({currentUserEmail, onLogOut}) {\r\n\r\n  const location = useLocation();\r\n\r\n  return (\r\n    <header className=\"header container\">\r\n      <div className=\"header__content\">\r\n        <img className=\"header__logo\" src={logo} alt=\"Логотип проекта Mesto Russia\" />\r\n        <ul className=\"user-nav\">\r\n          <li className=\"user-nav__item user-nav__item_type_email\">\r\n          {\r\n            location.pathname === '/'\r\n            ? currentUserEmail\r\n            : ''\r\n          }\r\n          </li>\r\n          <li\r\n            className=\"user-nav__item user-nav__item_type_sign\"\r\n            onClick={location.pathname === '/' ? onLogOut : () => {}}\r\n          >\r\n            <Route path=\"/sign-in\">\r\n              <Link to=\"/sign-up\" className=\"user-nav__link\">Регистрация</Link>\r\n            </Route>\r\n            <Route path=\"/sign-up\">\r\n              <Link to=\"/sign-in\" className=\"user-nav__link\">Войти</Link>\r\n            </Route>\r\n            <Route exact path=\"/\">\r\n              <Link to=\"/sign-in\" className=\"user-nav__link\">Выход</Link>\r\n            </Route>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </header>\r\n  );\r\n}\r\n\r\nexport default Header;\r\n","import React from 'react';\r\n\r\nexport const CurrentUserContext = React.createContext();\r\n","import { useContext } from 'react';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js';\r\n\r\nfunction Card({card, onCardClick, onCardLike, onCardDelete}) {\r\n\r\n  const currentUser = useContext(CurrentUserContext);\r\n\r\n  const isOwn = card.owner._id === currentUser._id;\r\n  const cardDeleteButtonClassName = (\r\n  `button ${isOwn ? 'button_type_delete' : ''}`\r\n);\r\n\r\n  const isLiked = card.likes.some(i => i._id === currentUser._id);\r\n  const cardLikeButtonClassName = (\r\n  `button button_type_like ${isLiked ? 'button_clicked' : ''}`\r\n);\r\n\r\n\r\n  function handleClick() {\r\n    onCardClick(card);\r\n  }\r\n\r\n  function handleLikeClick() {\r\n    onCardLike(card);\r\n  }\r\n\r\n  function handleDeleteClick() {\r\n    onCardDelete(card);\r\n\r\n  }\r\n\r\n  return (\r\n    <li className=\"gallery__item\">\r\n      <img className=\"gallery__item-image\" src={card.link} alt={card.name} onClick={handleClick}/>\r\n      <button type=\"button\" className={cardDeleteButtonClassName} onClick={handleDeleteClick} aria-label=\"Удалить\"></button>\r\n      <div className=\"gallery__item-info\">\r\n        <h2 className=\"gallery__item-title\">{card.name}</h2>\r\n        <div className=\"gallery__item-likes\">\r\n          <button type=\"button\" className={cardLikeButtonClassName} onClick={handleLikeClick} aria-label=\"Нравится\"></button>\r\n          <span className=\"gallery__item-like-counter\">{card.likes.length}</span>\r\n        </div>\r\n      </div>\r\n    </li>\r\n  );\r\n}\r\n\r\nexport default Card;\r\n","import { useContext } from 'react';\r\nimport Card from './Card.js';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js';\r\n\r\nfunction Main({onEditAvatar, onEditProfile, onAddPlace, cards, onCardClick, onCardLike, onCardDelete}) {\r\n\r\n  const currentUser = useContext(CurrentUserContext);\r\n\r\n  return (\r\n    <main className=\"main\">\r\n      <section className=\"profile container\">\r\n        <div className=\"profile__overlay\" onClick={onEditAvatar}>\r\n          <img className=\"profile__avatar\" alt=\"Фото профиля\" src={currentUser.avatar} />\r\n        </div>\r\n        <div className=\"profile__text\">\r\n          <h1 className=\"profile__name\">{currentUser.name}</h1>\r\n          <button type=\"button\" className=\"button button_type_edit\" aria-label=\"Редактировать\" onClick={onEditProfile}></button>\r\n          <p className=\"profile__job\">{currentUser.about}</p>\r\n        </div>\r\n        <button type=\"button\" className=\"button button_type_add\" aria-label=\"Добавить\" onClick={onAddPlace}></button>\r\n      </section>\r\n\r\n      <section className=\"gallery container\">\r\n        <ul className=\"gallery__list\">\r\n\r\n          {cards.map((card) => {\r\n            return (\r\n              <Card\r\n                key={card._id}\r\n                card={card}\r\n                onCardClick={onCardClick}\r\n                onCardLike={onCardLike}\r\n                onCardDelete={onCardDelete}\r\n              />\r\n            );\r\n          })}\r\n\r\n        </ul>\r\n      </section>\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default Main;\r\n","function Footer() {\r\n  return (\r\n    <footer className=\"footer container\">\r\n      <p className=\"footer__copyright\">&copy; {new Date().getFullYear()} Mesto Russia</p>\r\n    </footer>\r\n  );\r\n}\r\n\r\nexport default Footer;\r\n","function PopupWithForm({name, isOpen, onSubmit, title, children, buttonTitle, onClose}) {\r\n\r\n  const popupClassNames = `popup popup_type_${name} ${isOpen ? 'popup_opened' : ''}`;\r\n\r\n  return (\r\n    <div className={popupClassNames}>\r\n      <div className=\"popup__container\">\r\n        <form className={`form form_type_${name}`} name={name} onSubmit={onSubmit}>\r\n          <h2 className=\"form__title\">{title}</h2>\r\n          {children}\r\n          <button className=\"button button_type_save\" type=\"submit\">{buttonTitle}</button>\r\n        </form>\r\n        <button className=\"button button_type_close\" type=\"button\" aria-label=\"Закрыть\" onClick={onClose}></button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PopupWithForm;\r\n","function ImagePopup({card, onClose}) {\r\n\r\n  const popupClassNames = `popup ${card ? 'popup_opened' : ''}`;\r\n\r\n  return (\r\n    <div className={popupClassNames}>\r\n      <div className=\"popup__image-container\">\r\n        <img className=\"popup__image\" src={card && card.link} alt={card && card.name} />\r\n        <h3 className=\"popup__image-title\">{card && card.name}</h3>\r\n        <button className=\"button button_type_close\" type=\"button\" aria-label=\"Закрыть\" onClick={onClose}></button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ImagePopup;\r\n","import PopupWithForm from './PopupWithForm.js';\r\nimport { useState, useEffect, useContext } from 'react';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js';\r\n\r\nfunction EditProfilePopup({onUpdateUser, isOpen, onClose}) {\r\n  const currentUser = useContext(CurrentUserContext);\r\n  const [name, setName] = useState('');\r\n  const [description, setDescription] = useState('');\r\n\r\n  useEffect(() => {\r\n    setName(currentUser.name || '');\r\n    setDescription(currentUser.about || '');\r\n  }, [currentUser]);\r\n\r\n  function handleNameChange(e) {\r\n    setName(e.target.value);\r\n  }\r\n\r\n  function handleDescriptionChange(e) {\r\n    setDescription(e.target.value);\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n\r\n    onUpdateUser({\r\n      name,\r\n      about: description,\r\n    });\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      title='Редактировать профиль'\r\n      name={'profile-form'}\r\n      buttonTitle='Сохранить'\r\n      onSubmit={handleSubmit}\r\n    >\r\n      <fieldset className=\"form__content form__user-info\">\r\n        <input\r\n          className=\"form__item form__item_type_name\"\r\n          value={name}\r\n          onChange={handleNameChange}\r\n          type=\"text\"\r\n          name=\"name\"\r\n          minLength=\"2\"\r\n          maxLength=\"40\"\r\n          id=\"user-name\"\r\n          required\r\n        />\r\n        <span id=\"user-name-error\" className=\"form__item-error\"></span>\r\n        <input\r\n          className=\"form__item form__item_type_job\"\r\n          value={description}\r\n          onChange={handleDescriptionChange}\r\n          type=\"text\"\r\n          name=\"job\"\r\n          minLength=\"2\"\r\n          maxLength=\"200\"\r\n          id=\"user-job\"\r\n          required\r\n        />\r\n        <span id=\"user-job-error\" className=\"form__item-error\"></span>\r\n      </fieldset>\r\n\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default EditProfilePopup;\r\n","import PopupWithForm from './PopupWithForm.js';\r\nimport { useRef } from 'react';\r\n\r\nfunction EditAvatarPopup({onUpdateAvatar, isOpen, onClose}) {\r\n  const avatarRef = useRef();\r\n\r\n  function handleSubmit(e) {\r\n  e.preventDefault();\r\n\r\n  onUpdateAvatar({\r\n    avatar: avatarRef.current.value,\r\n  });\r\n}\r\n\r\n  return (\r\n    <PopupWithForm\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      title='Обновить аватар'\r\n      name={'avatar-update-form'}\r\n      buttonTitle='Сохранить'\r\n      onSubmit={handleSubmit}\r\n    >\r\n      <input\r\n        className=\"form__item form__item_type_avatar-update\"\r\n        type=\"url\"\r\n        name=\"link\"\r\n        placeholder=\"Ссылка на аватар\"\r\n        id=\"avatar-update\"\r\n        required\r\n        ref={avatarRef}\r\n      />\r\n      <span id=\"avatar-update-error\" className=\"form__item-error\"></span>\r\n\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default EditAvatarPopup;\r\n","import { useState } from 'react';\r\nimport PopupWithForm from './PopupWithForm.js';\r\n\r\nfunction AddPlacePopup({onAddPlace, isOpen, onClose}) {\r\n\r\n  const [placeName, setPlaceName] = useState('');\r\n  const [placeLink, setPlaceLink] = useState('');\r\n\r\n  function handlePlaceNameChange(e) {\r\n    setPlaceName(e.target.value);\r\n  }\r\n\r\n  function handlePlaceLinkChange(e) {\r\n    setPlaceLink(e.target.value);\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n\r\n    onAddPlace({\r\n    name: placeName,\r\n    link: placeLink,\r\n  });\r\n    setPlaceName('');\r\n    setPlaceLink('');\r\n}\r\n\r\n  return (\r\n    <PopupWithForm\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      title='Новое место'\r\n      name={'add-form'}\r\n      buttonTitle='Создать'\r\n      onSubmit={handleSubmit}\r\n    >\r\n      <fieldset className=\"form__content form__add-card\">\r\n        <input\r\n          className=\"form__item form__item_type_card-name\"\r\n          value={placeName}\r\n          onChange={handlePlaceNameChange}\r\n          type=\"text\"\r\n          name=\"name\"\r\n          placeholder=\"Название\"\r\n          minLength=\"2\"\r\n          maxLength=\"30\"\r\n          id=\"card-name\"\r\n          required\r\n        />\r\n        <span id=\"card-name-error\" className=\"form__item-error\"></span>\r\n        <input\r\n          className=\"form__item form__item_type_card-link\"\r\n          value={placeLink}\r\n          onChange={handlePlaceLinkChange}\r\n          type=\"url\"\r\n          name=\"link\"\r\n          placeholder=\"Ссылка на картинку\"\r\n          id=\"card-link\"\r\n          required\r\n        />\r\n        <span id=\"card-link-error\" className=\"form__item-error\"></span>\r\n      </fieldset>\r\n\r\n    </PopupWithForm>\r\n);\r\n}\r\n\r\nexport default AddPlacePopup;\r\n","import { Link } from 'react-router-dom';\r\nimport { useState } from 'react';\r\n\r\nfunction Register({onRegister}) {\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n\r\n  function handleEmailChange(e) {\r\n    setEmail(e.target.value);\r\n  }\r\n\r\n  function handlePasswordChange(e) {\r\n    setPassword(e.target.value);\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n\r\n    onRegister(email, password);\r\n  }\r\n\r\n  return (\r\n    <section className=\"sign\">\r\n      <form className=\"form form_type_sign-up\" onSubmit={handleSubmit}>\r\n        <h2 className=\"sign__title\">Регистрация</h2>\r\n        <fieldset className=\"form__content form__sign\">\r\n          <input\r\n            className=\"sign__item\"\r\n            value={email}\r\n            onChange={handleEmailChange}\r\n            type=\"email\"\r\n            name=\"email\"\r\n            id=\"email\"\r\n            placeholder=\"Email\"\r\n            required\r\n          />\r\n          <input\r\n            className=\"sign__item\"\r\n            value={password}\r\n            onChange={handlePasswordChange}\r\n            type=\"password\"\r\n            name=\"password\"\r\n            id=\"password\"\r\n            placeholder=\"Пароль\"\r\n            required\r\n          />\r\n        </fieldset>\r\n        <button type=\"submit\" className=\"sign__button\">Зарегистрироваться</button>\r\n      </form>\r\n      <div className=\"sign__login\">\r\n          <p className=\"sign__login-text\">Уже зарегистрированы?</p>\r\n          <Link to=\"/sign-in\" className=\"sign__login-link\">Войти</Link>\r\n        </div>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default Register;\r\n","import { useState } from 'react';\r\n\r\nfunction Login({onLogin}) {\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n\r\n  function handleEmailChange(e) {\r\n    setEmail(e.target.value);\r\n  }\r\n\r\n  function handlePasswordChange(e) {\r\n    setPassword(e.target.value);\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n\r\n    onLogin(email, password);\r\n  }\r\n\r\n  return (\r\n    <section className=\"sign\">\r\n      <form className=\"form form_type_sign-in\" onSubmit={handleSubmit}>\r\n        <h2 className=\"sign__title\">Вход</h2>\r\n        <fieldset className=\"form__content form__sign\">\r\n          <input\r\n            className=\"sign__item\"\r\n            value={email}\r\n            onChange={handleEmailChange}\r\n            type=\"email\"\r\n            name=\"email\"\r\n            id=\"email\"\r\n            placeholder=\"Email\"\r\n            required\r\n          />\r\n          <input\r\n            className=\"sign__item\"\r\n            value={password}\r\n            onChange={handlePasswordChange}\r\n            type=\"password\"\r\n            name=\"password\"\r\n            id=\"password\"\r\n            placeholder=\"Пароль\"\r\n            required\r\n          />\r\n        </fieldset>\r\n        <button type=\"submit\" className=\"sign__button\">Войти</button>\r\n      </form>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n","export default __webpack_public_path__ + \"static/media/success.1b6082f8.svg\";","export default __webpack_public_path__ + \"static/media/fail.df8eddf6.svg\";","import success from '../images/success.svg';\r\nimport fail from '../images/fail.svg';\r\n\r\nfunction InfoTooltip({isOpen, status, onClose}) {\r\n\r\n  const popupClassNames = `popup ${isOpen ? 'popup_opened' : ''}`;\r\n\r\n  return (\r\n    <div className={popupClassNames}>\r\n      <div className=\"infotooltip\">\r\n        <img className=\"infotooltip__image\" src={status ? success : fail} alt={status ? 'Вы успешно зарегистрировались!' : 'Что-то пошло не так! Попробуйте ещё раз.'} />\r\n        <p className=\"infotooltip__status\">{status ? 'Вы успешно зарегистрировались!' : 'Что-то пошло не так! Попробуйте ещё раз.'}</p>\r\n        <button className=\"button button_type_close\" type=\"button\" aria-label=\"Закрыть\" onClick={onClose}></button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default InfoTooltip;\r\n","import { Route, Redirect } from 'react-router-dom';\r\n\r\nfunction ProtectedRoute({ component: Component, ...props }) {\r\n  return (\r\n    <Route>\r\n      {() =>\r\n        props.loggedIn ? <Component {...props} /> : <Redirect to=\"/sign-up\" />\r\n      }\r\n    </Route>\r\n  );\r\n};\r\n\r\nexport default ProtectedRoute;\r\n","class Api {\r\n  constructor(url, password) {\r\n    this._url = url;\r\n    this._password = password;\r\n  }\r\n\r\n  // загрузка информации о пользователе с сервера (получаем данные пользователя)\r\n  getUserInfo() {\r\n    return fetch(`${this._url}/users/me`, {\r\n      method: 'GET',\r\n      headers: {\r\n        authorization: this._password,\r\n      }\r\n    })\r\n    .then(this._checkResponse)\r\n  }\r\n\r\n  // загрузка карточек с сервера (получаем список всех карточек в виде массива)\r\n  getInitialCards() {\r\n    return fetch(`${this._url}/cards`, {\r\n      method: 'GET',\r\n      headers: {\r\n        authorization: this._password,\r\n      }\r\n    })\r\n    .then(this._checkResponse)\r\n  }\r\n\r\n  // редактирование профиля (меняем данные пользователя)\r\n  patchUserInfo(user) {\r\n    return fetch(`${this._url}/users/me`, {\r\n      method: 'PATCH',\r\n      headers: {\r\n        authorization: this._password,\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        name: user.name,\r\n        about: user.about\r\n      })\r\n    })\r\n    .then(this._checkResponse)\r\n  }\r\n\r\n  // добавление новой карточки\r\n  postCard(item) {\r\n    return fetch(`${this._url}/cards`, {\r\n      method: 'POST',\r\n      headers: {\r\n        authorization: this._password,\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        name: item.name,\r\n        link: item.link\r\n      })\r\n    })\r\n    .then(this._checkResponse)\r\n  }\r\n\r\n  // удаление карточки\r\n  deleteCard(cardId) {\r\n    return fetch(`${this._url}/cards/${cardId}`, {\r\n      method: 'DELETE',\r\n      headers: {\r\n        authorization: this._password,\r\n      }\r\n    })\r\n    .then(this._checkResponse)\r\n  }\r\n\r\n  // постановка или снятие лайка\r\n  toggleLikeCardStatus(cardId, hasLike) {\r\n    return fetch(`${this._url}/cards/likes/${cardId}`, {\r\n      method: hasLike ? 'PUT' : 'DELETE',\r\n      headers: {\r\n        authorization: this._password,\r\n      }\r\n    })\r\n    .then(this._checkResponse)\r\n  }\r\n\r\n  // обновление аватара пользователя\r\n  patchUserAvatar(user) {\r\n    return fetch(`${this._url}/users/me/avatar`, {\r\n      method: 'PATCH',\r\n      headers: {\r\n        authorization: this._password,\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        avatar: user.avatar\r\n      })\r\n    })\r\n    .then(this._checkResponse)\r\n  }\r\n\r\n  _checkResponse(res) {\r\n    if(res.ok) {\r\n      return res.json();\r\n    }\r\n    return Promise.reject(`Ошибка: ${res.status}`);\r\n  }\r\n}\r\n\r\nconst api = new Api('https://mesto.nomoreparties.co/v1/cohort-20', 'aeac4cc4-9284-4753-bb8f-afa2eb1b5233');\r\n\r\nexport default api;\r\n","class Auth {\r\n  constructor(baseUrl) {\r\n    this._url = baseUrl;\r\n  }\r\n\r\n  // регистрация\r\n  signup(password, email) {\r\n    return fetch(`${this._url}/signup`, {\r\n      method: 'POST',\r\n      headers: {\r\n        \"Content-Type\": \"application/json\"\r\n      },\r\n      body: JSON.stringify({\r\n        \"password\": password,\r\n        \"email\": email\r\n      })\r\n    })\r\n    .then(this._checkResponse)\r\n  }\r\n\r\n  // авторизация\r\n  signin(password, email) {\r\n    return fetch(`${this._url}/signin`, {\r\n      method: 'POST',\r\n      headers: {\r\n        \"Content-Type\": \"application/json\"\r\n      },\r\n      body: JSON.stringify({\r\n        \"password\": password,\r\n        \"email\": email\r\n      })\r\n    })\r\n    .then(this._checkResponse)\r\n  }\r\n\r\n  // проверка токена\r\n  getContent(token) {\r\n    return fetch(`${this._url}/users/me`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Accept': 'application/json',\r\n        \"Content-Type\": \"application/json\",\r\n        \"Authorization\" : `Bearer ${token}`\r\n      }\r\n    })\r\n    .then(this._checkResponse)\r\n    .then(data => data)\r\n  }\r\n\r\n  _checkResponse(res) {\r\n    if(res.ok) {\r\n      return res.json();\r\n    }\r\n    return Promise.reject(`Ошибка: ${res.status}`);\r\n  }\r\n}\r\n\r\nconst auth = new Auth('https://auth.nomoreparties.co');\r\n\r\nexport default auth;\r\n","import { useState, useEffect } from 'react';\nimport { Switch, Route, Redirect, useHistory } from 'react-router-dom';\nimport Header from './Header.js';\nimport Main from './Main.js';\nimport Footer from './Footer.js';\nimport PopupWithForm from './PopupWithForm.js';\nimport ImagePopup from './ImagePopup.js';\nimport EditProfilePopup from './EditProfilePopup.js';\nimport EditAvatarPopup from './EditAvatarPopup.js';\nimport AddPlacePopup from './AddPlacePopup.js';\nimport Register from './Register.js';\nimport Login from './Login.js';\nimport InfoTooltip from './InfoTooltip.js';\nimport ProtectedRoute from './ProtectedRoute.js';\nimport api from '../utils/api.js';\nimport auth from '../utils/auth.js';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js';\n\nfunction App() {\n\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\n  const [isInfoTooltipOpen, setIsInfoTooltipOpen] = useState(false);\n  const [selectedCard, setSelectedCard] = useState(null);\n  const [currentUser, setCurrentUser] = useState({});\n  const [cards, setCards] = useState([]);\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [currentUserEmail, setCurrentUserEmail] = useState('');\n  const [infoTooltip, setInfoTooltip] = useState(false);\n  const history = useHistory();\n\n  useEffect(() => {\n    api.getUserInfo()\n      .then((data) => {\n        setCurrentUser(data);\n  })\n      .catch(err => console.log(err));\n  }, []);\n\n  useEffect(() => {\n    api.getInitialCards()\n      .then((cards) => {\n        setCards(cards);\n  })\n      .catch(err => console.log(err));\n  }, []);\n\n  useEffect(() => {\n    tokenCheck();\n  });\n\n  function handleUpdateUser(user) {\n    api.patchUserInfo(user)\n      .then(data => setCurrentUser(data))\n      .then(closeAllPopups)\n      .catch(err => console.log(err))\n  }\n\n  function handleUpdateAvatar(avatar) {\n    api.patchUserAvatar(avatar)\n      .then(data => setCurrentUser(data))\n      .then(closeAllPopups)\n      .catch(err => console.log(err))\n  }\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n\n    api.toggleLikeCardStatus(card._id, !isLiked).then((newCard) => {\n        setCards((state) => state.map((c) => c._id === card._id ? newCard : c));\n    });\n  }\n\n  function handleCardDelete(card) {\n    api.deleteCard(card._id)\n        .then(\n            setCards(cards.filter(i => i._id !== card._id))\n        )\n        .catch(err => console.log(err))\n  }\n\n  function handleAddPlaceSubmit(item) {\n    api.postCard(item)\n      .then((newCard) => {\n        setCards([...cards, newCard]);\n      })\n      .then(closeAllPopups)\n      .catch(err => console.log(err))\n  }\n\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true);\n  }\n\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(true);\n  }\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true);\n  }\n\n  function handleCardClick(selectedCard) {\n    setSelectedCard(selectedCard);\n  }\n\n  function closeAllPopups() {\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsEditAvatarPopupOpen(false);\n    setSelectedCard(null);\n    setIsInfoTooltipOpen(false);\n  }\n\n  function onLogin(email, password) {\n    auth.signin(password, email)\n      .then((res) => {\n        if(res) {\n          setLoggedIn(true);\n          setCurrentUserEmail(email);\n          localStorage.setItem('jwt', res.token);\n          history.push('/');\n        } else {\n          setIsInfoTooltipOpen(true);\n          setInfoTooltip(false);\n        }\n      })\n      .catch(err => console.log(err))\n  }\n\n  function onRegister(email, password) {\n    auth.signup(password, email)\n      .then((res) => {\n        setIsInfoTooltipOpen(true);\n        if(res) {\n          setInfoTooltip(true);\n          history.push('/sign-in');\n        } else {\n          setInfoTooltip(false);\n        }\n      })\n      .catch(err => console.log(err))\n  }\n\n  function onLogOut() {\n    localStorage.removeItem('jwt');\n    history.push('/sign-in');\n  }\n\n  function tokenCheck() {\n    if(localStorage.getItem('jwt')) {\n      const token = localStorage.getItem('jwt');\n      if(token) {\n        auth.getContent(token)\n          .then((res) => {\n            if(res) {\n              setCurrentUserEmail(res.data.email);\n            };\n            setLoggedIn(true);\n            history.push('/');\n          })\n          .catch(err => {\n            localStorage.removeItem('jwt');\n            console.log(err)}\n          )}\n    }\n  }\n\n  return (\n\n      <CurrentUserContext.Provider value={currentUser}>\n        <Header\n          currentUserEmail={currentUserEmail}\n          onLogOut={onLogOut}\n        />\n        <Switch>\n          <ProtectedRoute\n            exact path='/'\n            loggedIn={loggedIn}\n            component={Main}\n            cards={cards}\n            onEditProfile={handleEditProfileClick}\n            onAddPlace={handleAddPlaceClick}\n            onEditAvatar={handleEditAvatarClick}\n            onCardClick={handleCardClick}\n            onCardLike={handleCardLike}\n            onCardDelete={handleCardDelete}\n          />\n          <ProtectedRoute\n            exact path='/'\n            loggedIn={loggedIn}\n            component={Footer}\n          />\n          <Route path='/sign-up'>\n            <Register onRegister={onRegister} />\n          </Route>\n          <Route path='/sign-in'>\n            <Login onLogin={onLogin} />\n          </Route>\n          <Route>\n            {loggedIn\n              ? (<Redirect to='/'/>)\n              : (<Redirect to='/sign-up'/>)\n            }\n          </Route>\n        </Switch>\n        <InfoTooltip\n          status={infoTooltip}\n          isOpen={isInfoTooltipOpen}\n          onClose={closeAllPopups}\n        />\n        <EditProfilePopup\n          isOpen={isEditProfilePopupOpen}\n          onClose={closeAllPopups}\n          onUpdateUser={handleUpdateUser}\n        />\n\n        <AddPlacePopup\n          isOpen={isAddPlacePopupOpen}\n          onClose={closeAllPopups}\n          onAddPlace={handleAddPlaceSubmit}\n        />\n\n        <ImagePopup\n          card={selectedCard}\n          onClose={closeAllPopups}\n        />\n\n        <PopupWithForm\n          title={'Вы уверены?'}\n          name={'confirm-form'}\n          buttonTitle={'Да'}\n        >\n        </PopupWithForm>\n\n        <EditAvatarPopup\n          isOpen={isEditAvatarPopupOpen}\n          onClose={closeAllPopups}\n          onUpdateAvatar={handleUpdateAvatar}\n        />\n      </CurrentUserContext.Provider>\n\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport './index.css';\nimport App from './components/App.js';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n"],"sourceRoot":""}